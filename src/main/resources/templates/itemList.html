<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div th:replace="~{nav.html :: navbar}"></div>
<form action="/search" method="POST">
    <input name="searchText" style="display:inline">
    <button type="submit">검색</button>
</form>
<div class="card" th:each="i : ${item}">
    <img src="https://placehold.co/300" alt="집에 가고 싶어">
    <div>
        <a th:href="@{'/detail/' + ${i.id}}" th:text="${i.title}">작성자 없음</a>
        <a th:href="@{'/edit/' + ${i.id}}">✏️수정</a>
        <h4 th:text="${i.price}">7억</h4>
        <button class="btn" th:data-id="${i.id}">삭제</button>
    </div>
</div>

<div th:with="count=${number}" style="display: flex; gap: 10px;">
    <div th:each="num : ${#numbers.sequence(1, count)}">
        <a th:href="@{'/list/page/' + ${num}}">
            <p th:text="${num}"></p>
        </a>
    </div>
</div>

<script>
    document.querySelectorAll('.btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const id = this.dataset.id;

            fetch(`/delete/${id}`, {
                method: 'delete',
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ id: id })
            })
        });
        window.load();
    });
</script>
</body>
</html>
